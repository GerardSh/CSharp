# General
## Data Management
Базата данни съхранява множество данни на едно място и предоставя възможност за тяхното управление и манипулиране. Основната задача на базата данни не е само съхранението на данни, а и осигуряването на ефективно и организирано управление. Ако просто съхраняваме данни без система за управление, възникват различни проблеми:
- Size - когато данните не са правилно организирани, тяхното съхранение може да стане неефективно, като води до по-голямо натоварване на ресурсите и затруднения в обработката на големи обеми информация.
- Ease of updating - без система за управление актуализирането на данни може да бъде трудно и податливо на грешки. Без адекватен контрол върху данните, възможността за несъгласуваност и загуба на информация се увеличава.
- Searching - за ефективно търсене, базите данни използват различни методи като индексиране, което значително ускорява процеса. Индексите позволяват на системата да намира данни бързо без да се преглеждат всички записи. Това е особено полезно при работа с големи бази данни.
- Concurrency (Паралелност) - се отнася до способността на базата данни да обработва множество заявки или транзакции едновременно. Това е важно за поддържането на ефективността и скоростта в условия на голям брой потребители или процеси. За да се избегнат проблеми или конфликти при промени на данни, се използват механизми за управление на паралелността като транзакции и блокировки.
- Security - механизъм за споделен достъп и грануларност се отнася до възможността за прецизно управление на правата за достъп до данни на различни нива. Това позволява на различни потребители или групи да имат различни нива на достъп и видимост до данните, като осигурява защита и конфиденциалност.
- Consistency - отнася до принципа, че данните в базата трябва да бъдат валидни според зададените правила, ограничения и условия след всяка операция, като добавяне, актуализиране или изтриване на записи. SQL server е 100% ACID
## Databases and RDBMS (Relational Database Management System)
Базата данни е организирана колекция или колекции от информация, които се съхраняват и управляват по структуриран начин. Чрез прилагането на различни механизми и правила за управление на данните, се осигурява бързо намиране на необходимата информация, както и лесно добавяне, промяна и изтриване на данни. Тези операции се извършват ефективно и безопасно, като се използват технологии като индексиране, транзакции и интегритетни правила, които гарантират точността и последователността на данните.

За първи път през 1970 Edgar Codd предлага relational storage, с идеята да се оптимизира мястото за запис на информацията, защото съхранението е било много скъпо. В момента може да си позволим нерелационни бази данни, заради евтиния storage.

RDBMS предоставя инструментите за управление / работа с базите данни. Database engine-a който съдържа RDBMS-a, може да разчете нашите заявки, тоест имаме инструмент който може да кажем на RDBMS-a какво очакваме от него и той да го изпълни. Може да парсне нашия request, да разбере какво имаме предвид и да предприеме съответните действия. В DBMS системите, нямаме достъп до данните директно, но само management system.
## Database Engine Flow
![](Pasted%20image%2020241218213017.png)

Engine-a е част от DBMS. SQL server използва client-server модела. Клиента се обръща към database engine-a, по стандартен начин - чрез език който позволява да се обръщаме към DBE. Езика е SQL (Structured Query Language), който е стандартен за изпращане на заявки. SQL работи основно за RDBMS системите, докато нерелационните бази данни, имат подобие, други като MongoDB работят с JS като език за заявки и манипулиране на данните. Всички системи имат език за правене на заявки.
Когато клиента изпрати заявка към DBE, той я parse-ва и проверява дали спазва определени правила и да я превърне в инструкции, които може да се изпълнят върху самите данни. В резултат на извършените действия от DBE към базата, се връщат данни към клиента. 
При всички случаи, към клиента се връща информация, дори заявките които имат за цел да променят / добавят данни, получават информация какво количество данни са променили / добавили.
## SQL Server Architecture
![](Pasted%20image%2020241218212940.png)

Когато инсталираме SQL server-a, той прави инстанция, като ние може да инсталираме повече от една инстанция. SQL по дизайн използва много RAM, когато е пуснат в server mode, използва целия RAM на машината, без значение колко е. Инстанциите са именувани, за да може да ги достъпваме.
Вътре в инстанциите, имаме много бази данни, като всяка от тях, може да бъде достъпвана отделно. Може да даваме видимост на потребителите, само върху определена база данни.
В базата данни, има schema (схема). Схемата е като папка, с главната цел да е организационна структура, но също влияе и на достъпа, защото някой може да има достъп до базата, но не и до конкретната схема. В отделна схема, може да отделим неща, които само определени хора, може да достъпват. Всички сървъри имат default схема, като при SQL server е DBO.
Всяка схема се състои от множество таблици.
Имаме и физически storage, това е Data File от тип ROWS Data с разширение `.mdf` в който се пазят данните от базата, като също имаме и Transaction Log File от тип LOG с разширение `.ldf`, където се пазят всички изменения на данните. В лога се записват последователно всяка една от изпълнените заявки. Може да се контролира степента на запазване, както и колко информацията да съдържат. Ако имаме full transaction log, тоест пази цялата информация без лимити, може да се ползва като машина на времето. Ако сме направили backup на базата, transaction лога се изчиства и новата информация след backup-a, отново се запазва в transaction log-a, който ще се изчисти, когато направим нов backup. Ако сме направили backup от преди три дни и по някаква причина, тя се corupt-ва в 12:00 часа, ние може да възстановим базата с версията от преди три дни и използвайки transaction log-a, ще се възстанови цялата информация до посоченото време, примерно в 11:59.

При механично копиране на файлове, може да доведе до проблем. Не винаги може да се вземат файловете и да се прехвърлят на друга машина. Ползва се log shipping, за синхронизация на два сървъра - възстановяват се последните backup-и на двата, след което се пуска изравняване на логовете. Един от сървърите е master, неговия лог сe ship-ва към slave-a, където се изпълняват всички транзакции, което води до изравняване на базите данни и се постига репликация.
## Database Table Elements
Таблицата е основната градивна единица на базите данни и се състои от редове и колони. 
Всеки ред в таблицата представлява уникален запис, а всяка колона съдържа конкретен тип информация за всеки запис. Всеки ред съдържа данни за конкретен обект или събитие. Редовете обикновено се наричат записи (records) и са уникални, като съдържат стойности за всяка от колоните на таблицата.
Колоните са структурирани категории данни.
Entity в контекста на базите данни, представлява конкретен обект или събитие, което е записано в реда на таблицата. Например, ако имаме таблица за служители, всеки ред може да представлява служител с данни като име, длъжност, заплата и т.н. Всяка колона в таблицата е свойство на даденото entity и съвкупността от всички колони, описва entity-то като цяло. Entity-то се вписва освен в релационния, но и в обектния модел, понеже обекта е съвкупност от свойства / пропъртита, точно както реда е съвкупност от колони.
Колекцията от entity-та прави таблицата, а колекцията от таблици, прави базата данни.
## Structured Query Language
Ползваме SQL за да комуникираме с DB Engine-a.
SQL е декларативен език, за разлика от повечето езици, които са процедурни. В SQL казваме какво трябва да се случи и engine-a го прави. Работата на engine-a е да знае как да свърши нещото, което сме му задали.

Логически е разделен на 4 раздела:
- Data Definition - среща се и като DDL, където L е language. Описва структурата на нашите данни.
- Data Manipulation - запазва и връща информация.
- Data Control - дефинира достъпите.
- Transaction Control - операции, които ни позволяват да използваме така наречените транзакции. Имаме нужда от транзакциите, за да си гарантираме консистентността на данните.
## Data Types in SQL Server
![](Pasted%20image%2020241219202132.png)
![](Pasted%20image%2020241219202652.png)
![](Pasted%20image%2020241219203737.png)

Една от основните цели при работата с бази данни е оптималното съхранение на възможно най-много данни в минимален обем. Типовете данни играят ключова роля в това – те позволяват информацията да заема точно толкова място, колкото е необходимо. Затова е от съществено значение да се избират правилно типовете данни, за да се минимизира физическото пространство, което базата заема върху диска.
## Database Modelling
Data Definition Using SSMS



# Misc

# ChatGPT

# Bookmarks

Completion: 20.12.2024